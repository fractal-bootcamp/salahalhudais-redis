/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/clicks/route";
exports.ids = ["app/api/clicks/route"];
exports.modules = {

/***/ "(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclicks%2Froute&page=%2Fapi%2Fclicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclicks%2Froute.ts&appDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclicks%2Froute&page=%2Fapi%2Fclicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclicks%2Froute.ts&appDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sal_redis_project_src_app_api_clicks_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/clicks/route.ts */ \"(rsc)/./app/api/clicks/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/clicks/route\",\n        pathname: \"/api/clicks\",\n        filename: \"route\",\n        bundlePath: \"app/api/clicks/route\"\n    },\n    resolvedPagePath: \"/Users/sal/redis-project/src/app/api/clicks/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sal_redis_project_src_app_api_clicks_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGY2xpY2tzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjbGlja3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjbGlja3MlMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZzYWwlMkZyZWRpcy1wcm9qZWN0JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnNhbCUyRnJlZGlzLXByb2plY3QlMkZzcmMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ0k7QUFDakY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zYWwvcmVkaXMtcHJvamVjdC9zcmMvYXBwL2FwaS9jbGlja3Mvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NsaWNrcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NsaWNrc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2xpY2tzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NhbC9yZWRpcy1wcm9qZWN0L3NyYy9hcHAvYXBpL2NsaWNrcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclicks%2Froute&page=%2Fapi%2Fclicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclicks%2Froute.ts&appDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/clicks/route.ts":
/*!*********************************!*\
  !*** ./app/api/clicks/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _server_redis_services_clickCounterService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../server/redis/services/clickCounterService */ \"(rsc)/./server/redis/services/clickCounterService.ts\");\n/* harmony import */ var _server_redis_services_rateLimitService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../server/redis/services/rateLimitService */ \"(rsc)/./server/redis/services/rateLimitService.ts\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/../node_modules/next/dist/api/headers.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(rsc)/../node_modules/uuid/dist/esm/v4.js\");\n\n\n\n\n\nfunction corsHeaders() {\n    return {\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    };\n}\nasync function getUserId(_request) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)();\n    let userId = cookieStore.get('user-id')?.value;\n    if (!userId) {\n        userId = (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n    }\n    return userId;\n}\nasync function OPTIONS() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({}, {\n        headers: corsHeaders()\n    });\n}\nasync function GET() {\n    try {\n        console.log(\"GET /api/clicks: Starting request\");\n        const count = await (0,_server_redis_services_clickCounterService__WEBPACK_IMPORTED_MODULE_1__.getClickCount)();\n        console.log(\"GET /api/clicks: Got count\", count);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            count\n        }, {\n            headers: corsHeaders()\n        });\n    } catch (error) {\n        console.error('Error getting click count:', error);\n        // Log the full error stack\n        if (error instanceof Error) {\n            console.error(error.stack);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to get click count'\n        }, {\n            status: 500,\n            headers: corsHeaders()\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        // Get or create user ID\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)();\n        let userId = cookieStore.get('user-id')?.value;\n        if (!userId) {\n            userId = (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        }\n        // Check if user is rate limited\n        const rateLimited = await (0,_server_redis_services_rateLimitService__WEBPACK_IMPORTED_MODULE_2__.isRateLimited)(userId, {\n            limit: 10,\n            windowInSeconds: 10\n        });\n        if (rateLimited) {\n            const remaining = await (0,_server_redis_services_rateLimitService__WEBPACK_IMPORTED_MODULE_2__.getRemainingAttempts)(userId, 10);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Rate limited',\n                remainingAttempts: remaining\n            }, {\n                status: 429,\n                headers: corsHeaders()\n            });\n        }\n        // Record the click\n        const newCount = await (0,_server_redis_services_clickCounterService__WEBPACK_IMPORTED_MODULE_1__.recordClick)(userId);\n        const remaining = await (0,_server_redis_services_rateLimitService__WEBPACK_IMPORTED_MODULE_2__.getRemainingAttempts)(userId, 10);\n        // Create response\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            count: newCount,\n            remainingAttempts: remaining\n        }, {\n            headers: corsHeaders()\n        });\n        // Set cookie if needed\n        if (!cookieStore.get('user-id')) {\n            response.cookies.set('user-id', userId, {\n                maxAge: 60 * 60 * 24 * 7,\n                path: '/',\n                httpOnly: true,\n                sameSite: 'strict'\n            });\n        }\n        return response;\n    } catch (error) {\n        console.error('Error recording click:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to record click'\n        }, {\n            status: 500,\n            headers: corsHeaders()\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXJzL3NhbC9yZWRpcy1wcm9qZWN0L3NyYy9hcHAvYXBpL2NsaWNrcy9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgcmVjb3JkQ2xpY2ssIGdldENsaWNrQ291bnQgfSBmcm9tICcuLi8uLi8uLi9zZXJ2ZXIvcmVkaXMvc2VydmljZXMvY2xpY2tDb3VudGVyU2VydmljZSc7XG5pbXBvcnQgeyBpc1JhdGVMaW1pdGVkLCBnZXRSZW1haW5pbmdBdHRlbXB0cyB9IGZyb20gJy4uLy4uLy4uL3NlcnZlci9yZWRpcy9zZXJ2aWNlcy9yYXRlTGltaXRTZXJ2aWNlJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cblxuZnVuY3Rpb24gY29yc0hlYWRlcnMoKSB7XG4gIHJldHVybiB7XG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicsXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJJZChfcmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gIGxldCB1c2VySWQgPSBjb29raWVTdG9yZS5nZXQoJ3VzZXItaWQnKT8udmFsdWU7XG4gIFxuICBpZiAoIXVzZXJJZCkge1xuICAgIHVzZXJJZCA9IHV1aWR2NCgpO1xuICB9XG4gIFxuICByZXR1cm4gdXNlcklkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gT1BUSU9OUygpIHtcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHt9LCB7IGhlYWRlcnM6IGNvcnNIZWFkZXJzKCkgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJHRVQgL2FwaS9jbGlja3M6IFN0YXJ0aW5nIHJlcXVlc3RcIik7XG4gICAgY29uc3QgY291bnQgPSBhd2FpdCBnZXRDbGlja0NvdW50KCk7XG4gICAgY29uc29sZS5sb2coXCJHRVQgL2FwaS9jbGlja3M6IEdvdCBjb3VudFwiLCBjb3VudCk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgY291bnQgfSwgeyBoZWFkZXJzOiBjb3JzSGVhZGVycygpIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY2xpY2sgY291bnQ6JywgZXJyb3IpO1xuICAgIC8vIExvZyB0aGUgZnVsbCBlcnJvciBzdGFja1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yLnN0YWNrKTtcbiAgICB9XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgY2xpY2sgY291bnQnIH0sXG4gICAgICB7IHN0YXR1czogNTAwLCBoZWFkZXJzOiBjb3JzSGVhZGVycygpIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IG9yIGNyZWF0ZSB1c2VyIElEXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gICAgbGV0IHVzZXJJZCA9IGNvb2tpZVN0b3JlLmdldCgndXNlci1pZCcpPy52YWx1ZTtcbiAgICBcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdXNlcklkID0gdXVpZHY0KCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgcmF0ZSBsaW1pdGVkXG4gICAgY29uc3QgcmF0ZUxpbWl0ZWQgPSBhd2FpdCBpc1JhdGVMaW1pdGVkKHVzZXJJZCwge1xuICAgICAgbGltaXQ6IDEwLFxuICAgICAgd2luZG93SW5TZWNvbmRzOiAxMFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChyYXRlTGltaXRlZCkge1xuICAgICAgY29uc3QgcmVtYWluaW5nID0gYXdhaXQgZ2V0UmVtYWluaW5nQXR0ZW1wdHModXNlcklkLCAxMCk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdSYXRlIGxpbWl0ZWQnLCByZW1haW5pbmdBdHRlbXB0czogcmVtYWluaW5nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MjksIGhlYWRlcnM6IGNvcnNIZWFkZXJzKCkgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVjb3JkIHRoZSBjbGlja1xuICAgIGNvbnN0IG5ld0NvdW50ID0gYXdhaXQgcmVjb3JkQ2xpY2sodXNlcklkKTtcbiAgICBjb25zdCByZW1haW5pbmcgPSBhd2FpdCBnZXRSZW1haW5pbmdBdHRlbXB0cyh1c2VySWQsIDEwKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgcmVzcG9uc2VcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBjb3VudDogbmV3Q291bnQsXG4gICAgICByZW1haW5pbmdBdHRlbXB0czogcmVtYWluaW5nXG4gICAgfSwgeyBoZWFkZXJzOiBjb3JzSGVhZGVycygpIH0pO1xuICAgIFxuICAgIC8vIFNldCBjb29raWUgaWYgbmVlZGVkXG4gICAgaWYgKCFjb29raWVTdG9yZS5nZXQoJ3VzZXItaWQnKSkge1xuICAgICAgcmVzcG9uc2UuY29va2llcy5zZXQoJ3VzZXItaWQnLCB1c2VySWQsIHtcbiAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgKiA3LCAvLyAxIHdlZWtcbiAgICAgICAgcGF0aDogJy8nLFxuICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgc2FtZVNpdGU6ICdzdHJpY3QnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlY29yZGluZyBjbGljazonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byByZWNvcmQgY2xpY2snIH0sXG4gICAgICB7IHN0YXR1czogNTAwLCBoZWFkZXJzOiBjb3JzSGVhZGVycygpIH1cbiAgICApO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInJlY29yZENsaWNrIiwiZ2V0Q2xpY2tDb3VudCIsImlzUmF0ZUxpbWl0ZWQiLCJnZXRSZW1haW5pbmdBdHRlbXB0cyIsImNvb2tpZXMiLCJ2NCIsInV1aWR2NCIsImNvcnNIZWFkZXJzIiwiZ2V0VXNlcklkIiwiX3JlcXVlc3QiLCJjb29raWVTdG9yZSIsInVzZXJJZCIsImdldCIsInZhbHVlIiwiT1BUSU9OUyIsImpzb24iLCJoZWFkZXJzIiwiR0VUIiwiY29uc29sZSIsImxvZyIsImNvdW50IiwiZXJyb3IiLCJFcnJvciIsInN0YWNrIiwic3RhdHVzIiwiUE9TVCIsInJlcXVlc3QiLCJyYXRlTGltaXRlZCIsImxpbWl0Iiwid2luZG93SW5TZWNvbmRzIiwicmVtYWluaW5nIiwicmVtYWluaW5nQXR0ZW1wdHMiLCJuZXdDb3VudCIsInJlc3BvbnNlIiwic2V0IiwibWF4QWdlIiwicGF0aCIsImh0dHBPbmx5Iiwic2FtZVNpdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/clicks/route.ts\n");

/***/ }),

/***/ "(rsc)/./server/redis/client.ts":
/*!********************************!*\
  !*** ./server/redis/client.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRedisClient: () => (/* binding */ getRedisClient)\n/* harmony export */ });\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ioredis */ \"(rsc)/../node_modules/ioredis/built/index.js\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ioredis__WEBPACK_IMPORTED_MODULE_0__);\n\n// Environment variables for configuration\nconst redisUrl = process.env.REDIS_URL || 'redis://localhost:6379';\n// Singleton pattern to reuse connection\nlet client = null;\nasync function getRedisClient() {\n    if (!client) {\n        client = new (ioredis__WEBPACK_IMPORTED_MODULE_0___default())(redisUrl);\n        client.on('error', (err)=>console.error('Redis Client Error', err));\n        client.on('connect', ()=>console.log('Connected to Redis'));\n    }\n    return client;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2ZXIvcmVkaXMvY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QjtBQUU1QiwwQ0FBMEM7QUFDMUMsTUFBTUMsV0FBV0MsUUFBUUMsR0FBRyxDQUFDQyxTQUFTLElBQUk7QUFFMUMsd0NBQXdDO0FBQ3hDLElBQUlDLFNBQXVCO0FBRXBCLGVBQWVDO0lBQ3BCLElBQUksQ0FBQ0QsUUFBUTtRQUNYQSxTQUFTLElBQUlMLGdEQUFLQSxDQUFDQztRQUVuQkksT0FBT0UsRUFBRSxDQUFDLFNBQVMsQ0FBQ0MsTUFBUUMsUUFBUUMsS0FBSyxDQUFDLHNCQUFzQkY7UUFDaEVILE9BQU9FLEVBQUUsQ0FBQyxXQUFXLElBQU1FLFFBQVFFLEdBQUcsQ0FBQztJQUN6QztJQUVBLE9BQU9OO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWwvcmVkaXMtcHJvamVjdC9zcmMvc2VydmVyL3JlZGlzL2NsaWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVkaXMgZnJvbSAnaW9yZWRpcyc7XG5cbi8vIEVudmlyb25tZW50IHZhcmlhYmxlcyBmb3IgY29uZmlndXJhdGlvblxuY29uc3QgcmVkaXNVcmwgPSBwcm9jZXNzLmVudi5SRURJU19VUkwgfHwgJ3JlZGlzOi8vbG9jYWxob3N0OjYzNzknO1xuXG4vLyBTaW5nbGV0b24gcGF0dGVybiB0byByZXVzZSBjb25uZWN0aW9uXG5sZXQgY2xpZW50OiBSZWRpcyB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXNDbGllbnQoKSB7XG4gIGlmICghY2xpZW50KSB7XG4gICAgY2xpZW50ID0gbmV3IFJlZGlzKHJlZGlzVXJsKTtcbiAgICBcbiAgICBjbGllbnQub24oJ2Vycm9yJywgKGVycikgPT4gY29uc29sZS5lcnJvcignUmVkaXMgQ2xpZW50IEVycm9yJywgZXJyKSk7XG4gICAgY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4gY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBSZWRpcycpKTtcbiAgfVxuICBcbiAgcmV0dXJuIGNsaWVudDtcbn0iXSwibmFtZXMiOlsiUmVkaXMiLCJyZWRpc1VybCIsInByb2Nlc3MiLCJlbnYiLCJSRURJU19VUkwiLCJjbGllbnQiLCJnZXRSZWRpc0NsaWVudCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./server/redis/client.ts\n");

/***/ }),

/***/ "(rsc)/./server/redis/services/clickCounterService.ts":
/*!******************************************************!*\
  !*** ./server/redis/services/clickCounterService.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClickCount: () => (/* binding */ getClickCount),\n/* harmony export */   processClickBatch: () => (/* binding */ processClickBatch),\n/* harmony export */   recordClick: () => (/* binding */ recordClick)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../client */ \"(rsc)/./server/redis/client.ts\");\n/* harmony import */ var _pubSubService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pubSubService */ \"(rsc)/./server/redis/services/pubSubService.ts\");\n// Increment global counter in redis\n// Ad click events to a queue\n// retreive the current count\n\n\nconst CLICK_COUNT_KEY = 'clicks:counter';\nconst CLICK_QUEUE_KEY = 'clicks:queue';\nasync function recordClick(userId) {\n    const client = await (0,_client__WEBPACK_IMPORTED_MODULE_0__.getRedisClient)();\n    // Add to queue for analytics/processing\n    const clickData = JSON.stringify({\n        userId,\n        timestamp: Date.now()\n    });\n    await client.lpush(CLICK_QUEUE_KEY, clickData);\n    // Increment the global counter\n    const newCount = await client.incr(CLICK_COUNT_KEY);\n    // Publish update to Redis channel\n    await (0,_pubSubService__WEBPACK_IMPORTED_MODULE_1__.publishMessage)('click-updates', {\n        count: newCount,\n        userId\n    });\n    return newCount;\n}\nasync function getClickCount() {\n    const client = await (0,_client__WEBPACK_IMPORTED_MODULE_0__.getRedisClient)();\n    const count = await client.get(CLICK_COUNT_KEY);\n    return parseInt(count || '0', 10);\n}\nasync function processClickBatch(batchSize = 10) {\n    const client = await (0,_client__WEBPACK_IMPORTED_MODULE_0__.getRedisClient)();\n    const processed = [];\n    for(let i = 0; i < batchSize; i++){\n        const click = await client.rpop(CLICK_QUEUE_KEY);\n        if (!click) break;\n        processed.push(JSON.parse(click));\n    // Do additional processing here if needed\n    }\n    return processed;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2ZXIvcmVkaXMvc2VydmljZXMvY2xpY2tDb3VudGVyU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLG9DQUFvQztBQUNwQyw2QkFBNkI7QUFDN0IsNkJBQTZCO0FBQ2M7QUFDTTtBQUVqRCxNQUFNRSxrQkFBa0I7QUFDeEIsTUFBTUMsa0JBQWtCO0FBRWpCLGVBQWVDLFlBQVlDLE1BQWM7SUFDOUMsTUFBTUMsU0FBUyxNQUFNTix1REFBY0E7SUFFbkMsd0NBQXdDO0lBQ3hDLE1BQU1PLFlBQVlDLEtBQUtDLFNBQVMsQ0FBQztRQUMvQko7UUFDQUssV0FBV0MsS0FBS0MsR0FBRztJQUNyQjtJQUNBLE1BQU1OLE9BQU9PLEtBQUssQ0FBQ1YsaUJBQWlCSTtJQUVwQywrQkFBK0I7SUFDL0IsTUFBTU8sV0FBVyxNQUFNUixPQUFPUyxJQUFJLENBQUNiO0lBRW5DLGtDQUFrQztJQUNsQyxNQUFNRCw4REFBY0EsQ0FBQyxpQkFBaUI7UUFDcENlLE9BQU9GO1FBQ1BUO0lBQ0Y7SUFFQSxPQUFPUztBQUNUO0FBRU8sZUFBZUc7SUFDcEIsTUFBTVgsU0FBUyxNQUFNTix1REFBY0E7SUFDbkMsTUFBTWdCLFFBQVEsTUFBTVYsT0FBT1ksR0FBRyxDQUFDaEI7SUFDL0IsT0FBT2lCLFNBQVNILFNBQVMsS0FBSztBQUNoQztBQUVPLGVBQWVJLGtCQUFrQkMsWUFBWSxFQUFFO0lBQ3BELE1BQU1mLFNBQVMsTUFBTU4sdURBQWNBO0lBQ25DLE1BQU1zQixZQUFZLEVBQUU7SUFFcEIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlGLFdBQVdFLElBQUs7UUFDbEMsTUFBTUMsUUFBUSxNQUFNbEIsT0FBT21CLElBQUksQ0FBQ3RCO1FBQ2hDLElBQUksQ0FBQ3FCLE9BQU87UUFFWkYsVUFBVUksSUFBSSxDQUFDbEIsS0FBS21CLEtBQUssQ0FBQ0g7SUFDMUIsMENBQTBDO0lBQzVDO0lBRUEsT0FBT0Y7QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL3NhbC9yZWRpcy1wcm9qZWN0L3NyYy9zZXJ2ZXIvcmVkaXMvc2VydmljZXMvY2xpY2tDb3VudGVyU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbmNyZW1lbnQgZ2xvYmFsIGNvdW50ZXIgaW4gcmVkaXNcbi8vIEFkIGNsaWNrIGV2ZW50cyB0byBhIHF1ZXVlXG4vLyByZXRyZWl2ZSB0aGUgY3VycmVudCBjb3VudFxuaW1wb3J0IHsgZ2V0UmVkaXNDbGllbnQgfSBmcm9tICcuLi9jbGllbnQnO1xuaW1wb3J0IHsgcHVibGlzaE1lc3NhZ2UgfSBmcm9tICcuL3B1YlN1YlNlcnZpY2UnO1xuXG5jb25zdCBDTElDS19DT1VOVF9LRVkgPSAnY2xpY2tzOmNvdW50ZXInO1xuY29uc3QgQ0xJQ0tfUVVFVUVfS0VZID0gJ2NsaWNrczpxdWV1ZSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWNvcmRDbGljayh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFJlZGlzQ2xpZW50KCk7XG4gIFxuICAvLyBBZGQgdG8gcXVldWUgZm9yIGFuYWx5dGljcy9wcm9jZXNzaW5nXG4gIGNvbnN0IGNsaWNrRGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICB1c2VySWQsXG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gIH0pO1xuICBhd2FpdCBjbGllbnQubHB1c2goQ0xJQ0tfUVVFVUVfS0VZLCBjbGlja0RhdGEpO1xuICBcbiAgLy8gSW5jcmVtZW50IHRoZSBnbG9iYWwgY291bnRlclxuICBjb25zdCBuZXdDb3VudCA9IGF3YWl0IGNsaWVudC5pbmNyKENMSUNLX0NPVU5UX0tFWSk7XG4gIFxuICAvLyBQdWJsaXNoIHVwZGF0ZSB0byBSZWRpcyBjaGFubmVsXG4gIGF3YWl0IHB1Ymxpc2hNZXNzYWdlKCdjbGljay11cGRhdGVzJywge1xuICAgIGNvdW50OiBuZXdDb3VudCxcbiAgICB1c2VySWRcbiAgfSk7XG4gIFxuICByZXR1cm4gbmV3Q291bnQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDbGlja0NvdW50KCk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFJlZGlzQ2xpZW50KCk7XG4gIGNvbnN0IGNvdW50ID0gYXdhaXQgY2xpZW50LmdldChDTElDS19DT1VOVF9LRVkpO1xuICByZXR1cm4gcGFyc2VJbnQoY291bnQgfHwgJzAnLCAxMCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzQ2xpY2tCYXRjaChiYXRjaFNpemUgPSAxMCkge1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRSZWRpc0NsaWVudCgpO1xuICBjb25zdCBwcm9jZXNzZWQgPSBbXTtcbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmF0Y2hTaXplOyBpKyspIHtcbiAgICBjb25zdCBjbGljayA9IGF3YWl0IGNsaWVudC5ycG9wKENMSUNLX1FVRVVFX0tFWSk7XG4gICAgaWYgKCFjbGljaykgYnJlYWs7XG4gICAgXG4gICAgcHJvY2Vzc2VkLnB1c2goSlNPTi5wYXJzZShjbGljaykpO1xuICAgIC8vIERvIGFkZGl0aW9uYWwgcHJvY2Vzc2luZyBoZXJlIGlmIG5lZWRlZFxuICB9XG4gIFxuICByZXR1cm4gcHJvY2Vzc2VkO1xufSJdLCJuYW1lcyI6WyJnZXRSZWRpc0NsaWVudCIsInB1Ymxpc2hNZXNzYWdlIiwiQ0xJQ0tfQ09VTlRfS0VZIiwiQ0xJQ0tfUVVFVUVfS0VZIiwicmVjb3JkQ2xpY2siLCJ1c2VySWQiLCJjbGllbnQiLCJjbGlja0RhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImxwdXNoIiwibmV3Q291bnQiLCJpbmNyIiwiY291bnQiLCJnZXRDbGlja0NvdW50IiwiZ2V0IiwicGFyc2VJbnQiLCJwcm9jZXNzQ2xpY2tCYXRjaCIsImJhdGNoU2l6ZSIsInByb2Nlc3NlZCIsImkiLCJjbGljayIsInJwb3AiLCJwdXNoIiwicGFyc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./server/redis/services/clickCounterService.ts\n");

/***/ }),

/***/ "(rsc)/./server/redis/services/pubSubService.ts":
/*!************************************************!*\
  !*** ./server/redis/services/pubSubService.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSubscriber: () => (/* binding */ createSubscriber),\n/* harmony export */   publishMessage: () => (/* binding */ publishMessage)\n/* harmony export */ });\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next */ \"next\");\n/* harmony import */ var next__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var socket_io__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! socket.io */ \"(rsc)/../node_modules/socket.io/wrapper.mjs\");\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../client */ \"(rsc)/./server/redis/client.ts\");\n// server.ts\n\n\n\n\n\nconst dev = \"development\" !== 'production';\nconst app = next__WEBPACK_IMPORTED_MODULE_2___default()({\n    dev\n});\nconst handle = app.getRequestHandler();\nasync function startServer() {\n    await app.prepare();\n    // Create Redis clients for pub/sub\n    const redisSubscriber = await (0,_client__WEBPACK_IMPORTED_MODULE_4__.getRedisClient)();\n    const redisPublisher = await (0,_client__WEBPACK_IMPORTED_MODULE_4__.getRedisClient)();\n    // Make publisher available globally for API routes\n    global.redisPublisher = redisPublisher;\n    const server = (0,http__WEBPACK_IMPORTED_MODULE_0__.createServer)((req, res)=>{\n        const parsedUrl = (0,url__WEBPACK_IMPORTED_MODULE_1__.parse)(req.url || '', true);\n        handle(req, res, parsedUrl);\n    });\n    // Set up Socket.IO\n    const io = new socket_io__WEBPACK_IMPORTED_MODULE_3__.Server(server);\n    // Handle WebSocket connections\n    io.on('connection', (socket)=>{\n        console.log('Client connected');\n        socket.on('disconnect', ()=>{\n            console.log('Client disconnected');\n        });\n    });\n    // Subscribe to Redis channel\n    await redisSubscriber.subscribe('click-updates', (message)=>{\n        // Forward message to all connected WebSocket clients\n        if (typeof message === 'string') {\n            io.emit('click-update', JSON.parse(message));\n        }\n    });\n    server.listen(process.env.PORT || 3000, ()=>{\n        console.log('> Ready on http://localhost:3000');\n    });\n}\nstartServer().catch(console.error);\n/**\n * Publishes a message to a Redis channel\n * @param channel The Redis channel to publish to\n * @param message The message to publish (will be JSON stringified)\n */ async function publishMessage(channel, message) {\n    const client = await (0,_client__WEBPACK_IMPORTED_MODULE_4__.getRedisClient)();\n    await client.publish(channel, JSON.stringify(message));\n}\n/**\n * Creates a dedicated subscriber client for Redis pub/sub\n * Note: In Redis pub/sub, a client that subscribes to a channel\n * enters a special mode and can't be used for other commands\n */ async function createSubscriber() {\n    // Create a dedicated Redis client for subscriptions\n    const Redis = (await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! ioredis */ \"(rsc)/../node_modules/ioredis/built/index.js\", 23))).default;\n    const redisUrl = process.env.REDIS_URL || 'redis://localhost:6379';\n    const subscriber = new Redis(redisUrl);\n    subscriber.on('error', (err)=>{\n        // Convert the error to a string before logging\n        const errorMessage = err instanceof Error ? err.message : String(err);\n        console.error('Redis Subscriber Error:', errorMessage);\n    });\n    return subscriber;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2ZXIvcmVkaXMvc2VydmljZXMvcHViU3ViU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsWUFBWTtBQUN3QjtBQUNSO0FBQ0o7QUFDVztBQUNRO0FBTzNDLE1BQU1LLE1BQU1DLGtCQUF5QjtBQUNyQyxNQUFNQyxNQUFNTCwyQ0FBSUEsQ0FBQztJQUFFRztBQUFJO0FBQ3ZCLE1BQU1HLFNBQVNELElBQUlFLGlCQUFpQjtBQUVwQyxlQUFlQztJQUNiLE1BQU1ILElBQUlJLE9BQU87SUFFakIsbUNBQW1DO0lBQ25DLE1BQU1DLGtCQUFrQixNQUFNUix1REFBY0E7SUFDNUMsTUFBTVMsaUJBQWlCLE1BQU1ULHVEQUFjQTtJQUUzQyxtREFBbUQ7SUFDbkRVLE9BQU9ELGNBQWMsR0FBR0E7SUFFeEIsTUFBTUUsU0FBU2Ysa0RBQVlBLENBQUMsQ0FBQ2dCLEtBQUtDO1FBQ2hDLE1BQU1DLFlBQVlqQiwwQ0FBS0EsQ0FBQ2UsSUFBSUcsR0FBRyxJQUFJLElBQUk7UUFDdkNYLE9BQU9RLEtBQUtDLEtBQUtDO0lBQ25CO0lBRUEsbUJBQW1CO0lBQ25CLE1BQU1FLEtBQUssSUFBSWpCLDZDQUFNQSxDQUFDWTtJQUV0QiwrQkFBK0I7SUFDL0JLLEdBQUdDLEVBQUUsQ0FBQyxjQUFjLENBQUNDO1FBQ25CQyxRQUFRQyxHQUFHLENBQUM7UUFFWkYsT0FBT0QsRUFBRSxDQUFDLGNBQWM7WUFDdEJFLFFBQVFDLEdBQUcsQ0FBQztRQUNkO0lBQ0Y7SUFFQSw2QkFBNkI7SUFDN0IsTUFBTVosZ0JBQWdCYSxTQUFTLENBQUMsaUJBQWlCLENBQUNDO1FBQ2hELHFEQUFxRDtRQUNyRCxJQUFJLE9BQU9BLFlBQVksVUFBVTtZQUMvQk4sR0FBR08sSUFBSSxDQUFDLGdCQUFnQkMsS0FBSzNCLEtBQUssQ0FBQ3lCO1FBQ3JDO0lBQ0Y7SUFFQVgsT0FBT2MsTUFBTSxDQUFDdkIsUUFBUXdCLEdBQUcsQ0FBQ0MsSUFBSSxJQUFJLE1BQU07UUFDdENSLFFBQVFDLEdBQUcsQ0FBQztJQUNkO0FBQ0Y7QUFFQWQsY0FBY3NCLEtBQUssQ0FBQ1QsUUFBUVUsS0FBSztBQUVqQzs7OztDQUlDLEdBQ00sZUFBZUMsZUFBZUMsT0FBZSxFQUFFVCxPQUFZO0lBQ2hFLE1BQU1VLFNBQVMsTUFBTWhDLHVEQUFjQTtJQUNuQyxNQUFNZ0MsT0FBT0MsT0FBTyxDQUFDRixTQUFTUCxLQUFLVSxTQUFTLENBQUNaO0FBQy9DO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVhO0lBQ3BCLG9EQUFvRDtJQUNwRCxNQUFNQyxRQUFRLENBQUMsTUFBTSx5SkFBZ0IsRUFBR0MsT0FBTztJQUMvQyxNQUFNQyxXQUFXcEMsUUFBUXdCLEdBQUcsQ0FBQ2EsU0FBUyxJQUFJO0lBRTFDLE1BQU1DLGFBQWEsSUFBSUosTUFBTUU7SUFFN0JFLFdBQVd2QixFQUFFLENBQUMsU0FBUyxDQUFDd0I7UUFDdEIsK0NBQStDO1FBQy9DLE1BQU1DLGVBQWVELGVBQWVFLFFBQVFGLElBQUluQixPQUFPLEdBQUdzQixPQUFPSDtRQUNqRXRCLFFBQVFVLEtBQUssQ0FBQywyQkFBMkJhO0lBQzNDO0lBRUEsT0FBT0Y7QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL3NhbC9yZWRpcy1wcm9qZWN0L3NyYy9zZXJ2ZXIvcmVkaXMvc2VydmljZXMvcHViU3ViU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzZXJ2ZXIudHNcbmltcG9ydCB7IGNyZWF0ZVNlcnZlciB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICd1cmwnO1xuaW1wb3J0IG5leHQgZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tICdzb2NrZXQuaW8nO1xuaW1wb3J0IHsgZ2V0UmVkaXNDbGllbnQgfSBmcm9tICcuLi9jbGllbnQnO1xuXG4vLyBFeHRlbmQgZ2xvYmFsIHRvIGluY2x1ZGUgb3VyIFJlZGlzIHB1Ymxpc2hlclxuZGVjbGFyZSBnbG9iYWwge1xuICB2YXIgcmVkaXNQdWJsaXNoZXI6IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgZ2V0UmVkaXNDbGllbnQ+PiB8IG51bGw7XG59XG5cbmNvbnN0IGRldiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbic7XG5jb25zdCBhcHAgPSBuZXh0KHsgZGV2IH0pO1xuY29uc3QgaGFuZGxlID0gYXBwLmdldFJlcXVlc3RIYW5kbGVyKCk7XG5cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0U2VydmVyKCkge1xuICBhd2FpdCBhcHAucHJlcGFyZSgpO1xuXG4gIC8vIENyZWF0ZSBSZWRpcyBjbGllbnRzIGZvciBwdWIvc3ViXG4gIGNvbnN0IHJlZGlzU3Vic2NyaWJlciA9IGF3YWl0IGdldFJlZGlzQ2xpZW50KCk7XG4gIGNvbnN0IHJlZGlzUHVibGlzaGVyID0gYXdhaXQgZ2V0UmVkaXNDbGllbnQoKTtcbiAgXG4gIC8vIE1ha2UgcHVibGlzaGVyIGF2YWlsYWJsZSBnbG9iYWxseSBmb3IgQVBJIHJvdXRlc1xuICBnbG9iYWwucmVkaXNQdWJsaXNoZXIgPSByZWRpc1B1Ymxpc2hlcjtcblxuICBjb25zdCBzZXJ2ZXIgPSBjcmVhdGVTZXJ2ZXIoKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcGFyc2VkVXJsID0gcGFyc2UocmVxLnVybCB8fCAnJywgdHJ1ZSk7XG4gICAgaGFuZGxlKHJlcSwgcmVzLCBwYXJzZWRVcmwpO1xuICB9KTtcblxuICAvLyBTZXQgdXAgU29ja2V0LklPXG4gIGNvbnN0IGlvID0gbmV3IFNlcnZlcihzZXJ2ZXIpO1xuXG4gIC8vIEhhbmRsZSBXZWJTb2NrZXQgY29ubmVjdGlvbnNcbiAgaW8ub24oJ2Nvbm5lY3Rpb24nLCAoc29ja2V0KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NsaWVudCBjb25uZWN0ZWQnKTtcbiAgICBcbiAgICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnQ2xpZW50IGRpc2Nvbm5lY3RlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBTdWJzY3JpYmUgdG8gUmVkaXMgY2hhbm5lbFxuICBhd2FpdCByZWRpc1N1YnNjcmliZXIuc3Vic2NyaWJlKCdjbGljay11cGRhdGVzJywgKG1lc3NhZ2UpID0+IHtcbiAgICAvLyBGb3J3YXJkIG1lc3NhZ2UgdG8gYWxsIGNvbm5lY3RlZCBXZWJTb2NrZXQgY2xpZW50c1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlvLmVtaXQoJ2NsaWNrLXVwZGF0ZScsIEpTT04ucGFyc2UobWVzc2FnZSkpO1xuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDAsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnPiBSZWFkeSBvbiBodHRwOi8vbG9jYWxob3N0OjMwMDAnKTtcbiAgfSk7XG59XG5cbnN0YXJ0U2VydmVyKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbi8qKlxuICogUHVibGlzaGVzIGEgbWVzc2FnZSB0byBhIFJlZGlzIGNoYW5uZWxcbiAqIEBwYXJhbSBjaGFubmVsIFRoZSBSZWRpcyBjaGFubmVsIHRvIHB1Ymxpc2ggdG9cbiAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHB1Ymxpc2ggKHdpbGwgYmUgSlNPTiBzdHJpbmdpZmllZClcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1Ymxpc2hNZXNzYWdlKGNoYW5uZWw6IHN0cmluZywgbWVzc2FnZTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFJlZGlzQ2xpZW50KCk7XG4gIGF3YWl0IGNsaWVudC5wdWJsaXNoKGNoYW5uZWwsIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVkaWNhdGVkIHN1YnNjcmliZXIgY2xpZW50IGZvciBSZWRpcyBwdWIvc3ViXG4gKiBOb3RlOiBJbiBSZWRpcyBwdWIvc3ViLCBhIGNsaWVudCB0aGF0IHN1YnNjcmliZXMgdG8gYSBjaGFubmVsXG4gKiBlbnRlcnMgYSBzcGVjaWFsIG1vZGUgYW5kIGNhbid0IGJlIHVzZWQgZm9yIG90aGVyIGNvbW1hbmRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmVyKCkge1xuICAvLyBDcmVhdGUgYSBkZWRpY2F0ZWQgUmVkaXMgY2xpZW50IGZvciBzdWJzY3JpcHRpb25zXG4gIGNvbnN0IFJlZGlzID0gKGF3YWl0IGltcG9ydCgnaW9yZWRpcycpKS5kZWZhdWx0O1xuICBjb25zdCByZWRpc1VybCA9IHByb2Nlc3MuZW52LlJFRElTX1VSTCB8fCAncmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OSc7XG4gIFxuICBjb25zdCBzdWJzY3JpYmVyID0gbmV3IFJlZGlzKHJlZGlzVXJsKTtcbiAgXG4gIHN1YnNjcmliZXIub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgIC8vIENvbnZlcnQgdGhlIGVycm9yIHRvIGEgc3RyaW5nIGJlZm9yZSBsb2dnaW5nXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFN0cmluZyhlcnIpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ1JlZGlzIFN1YnNjcmliZXIgRXJyb3I6JywgZXJyb3JNZXNzYWdlKTtcbiAgfSk7XG4gIFxuICByZXR1cm4gc3Vic2NyaWJlcjtcbn0iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyIiwicGFyc2UiLCJuZXh0IiwiU2VydmVyIiwiZ2V0UmVkaXNDbGllbnQiLCJkZXYiLCJwcm9jZXNzIiwiYXBwIiwiaGFuZGxlIiwiZ2V0UmVxdWVzdEhhbmRsZXIiLCJzdGFydFNlcnZlciIsInByZXBhcmUiLCJyZWRpc1N1YnNjcmliZXIiLCJyZWRpc1B1Ymxpc2hlciIsImdsb2JhbCIsInNlcnZlciIsInJlcSIsInJlcyIsInBhcnNlZFVybCIsInVybCIsImlvIiwib24iLCJzb2NrZXQiLCJjb25zb2xlIiwibG9nIiwic3Vic2NyaWJlIiwibWVzc2FnZSIsImVtaXQiLCJKU09OIiwibGlzdGVuIiwiZW52IiwiUE9SVCIsImNhdGNoIiwiZXJyb3IiLCJwdWJsaXNoTWVzc2FnZSIsImNoYW5uZWwiLCJjbGllbnQiLCJwdWJsaXNoIiwic3RyaW5naWZ5IiwiY3JlYXRlU3Vic2NyaWJlciIsIlJlZGlzIiwiZGVmYXVsdCIsInJlZGlzVXJsIiwiUkVESVNfVVJMIiwic3Vic2NyaWJlciIsImVyciIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwiU3RyaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./server/redis/services/pubSubService.ts\n");

/***/ }),

/***/ "(rsc)/./server/redis/services/rateLimitService.ts":
/*!***************************************************!*\
  !*** ./server/redis/services/rateLimitService.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRemainingAttempts: () => (/* binding */ getRemainingAttempts),\n/* harmony export */   isRateLimited: () => (/* binding */ isRateLimited),\n/* harmony export */   resetRateLimit: () => (/* binding */ resetRateLimit)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../client */ \"(rsc)/./server/redis/client.ts\");\n\n// to dos:\n// Identify users uniquely\n// Enforce 10 clicks per 10 seconds rules\n// Return appropriate response when rate limit is exceeded\nfunction getRateLimitKey(identifier) {\n    return `ratelimit:${identifier}`;\n}\nasync function isRateLimited(identifier, options) {\n    const { limit, windowInSeconds } = options;\n    const client = await (0,_client__WEBPACK_IMPORTED_MODULE_0__.getRedisClient)();\n    const key = getRateLimitKey(identifier);\n    const current = await client.get(key) || 0;\n    if (Number(current) >= limit) {\n        return true; // Rate limited\n    }\n    await client.incr(key);\n    if (Number(current) === 0) {\n        await client.expire(key, windowInSeconds);\n    }\n    return false; // Not rate limited\n}\nasync function getRemainingAttempts(identifier, limit) {\n    const client = await (0,_client__WEBPACK_IMPORTED_MODULE_0__.getRedisClient)();\n    const key = getRateLimitKey(identifier);\n    const current = await client.get(key) || 0;\n    return Math.max(0, limit - Number(current));\n}\nasync function resetRateLimit(identifier) {\n    const client = await (0,_client__WEBPACK_IMPORTED_MODULE_0__.getRedisClient)();\n    await client.del(getRateLimitKey(identifier));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2ZXIvcmVkaXMvc2VydmljZXMvcmF0ZUxpbWl0U2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJDO0FBSTNDLFVBQVU7QUFDViwwQkFBMEI7QUFFMUIseUNBQXlDO0FBQ3pDLDBEQUEwRDtBQUUxRCxTQUFTQyxnQkFBZ0JDLFVBQWtCO0lBQ3pDLE9BQU8sQ0FBQyxVQUFVLEVBQUVBLFlBQVk7QUFDbEM7QUFFTyxlQUFlQyxjQUNwQkQsVUFBa0IsRUFDbEJFLE9BQXlCO0lBRXpCLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxlQUFlLEVBQUUsR0FBR0Y7SUFDbkMsTUFBTUcsU0FBUyxNQUFNUCx1REFBY0E7SUFDbkMsTUFBTVEsTUFBTVAsZ0JBQWdCQztJQUU1QixNQUFNTyxVQUFVLE1BQU1GLE9BQU9HLEdBQUcsQ0FBQ0YsUUFBUTtJQUV6QyxJQUFJRyxPQUFPRixZQUFZSixPQUFPO1FBQzVCLE9BQU8sTUFBTSxlQUFlO0lBQzlCO0lBRUEsTUFBTUUsT0FBT0ssSUFBSSxDQUFDSjtJQUNsQixJQUFJRyxPQUFPRixhQUFhLEdBQUc7UUFDekIsTUFBTUYsT0FBT00sTUFBTSxDQUFDTCxLQUFLRjtJQUMzQjtJQUVBLE9BQU8sT0FBTyxtQkFBbUI7QUFDbkM7QUFFTyxlQUFlUSxxQkFDcEJaLFVBQWtCLEVBQ2xCRyxLQUFhO0lBRWIsTUFBTUUsU0FBUyxNQUFNUCx1REFBY0E7SUFDbkMsTUFBTVEsTUFBTVAsZ0JBQWdCQztJQUU1QixNQUFNTyxVQUFVLE1BQU1GLE9BQU9HLEdBQUcsQ0FBQ0YsUUFBUTtJQUN6QyxPQUFPTyxLQUFLQyxHQUFHLENBQUMsR0FBR1gsUUFBUU0sT0FBT0Y7QUFDcEM7QUFFTyxlQUFlUSxlQUFlZixVQUFrQjtJQUNyRCxNQUFNSyxTQUFTLE1BQU1QLHVEQUFjQTtJQUNuQyxNQUFNTyxPQUFPVyxHQUFHLENBQUNqQixnQkFBZ0JDO0FBQ25DIiwic291cmNlcyI6WyIvVXNlcnMvc2FsL3JlZGlzLXByb2plY3Qvc3JjL3NlcnZlci9yZWRpcy9zZXJ2aWNlcy9yYXRlTGltaXRTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFJlZGlzQ2xpZW50IH0gZnJvbSAnLi4vY2xpZW50JztcbmltcG9ydCB7IFJhdGVMaW1pdE9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5cblxuLy8gdG8gZG9zOlxuLy8gSWRlbnRpZnkgdXNlcnMgdW5pcXVlbHlcblxuLy8gRW5mb3JjZSAxMCBjbGlja3MgcGVyIDEwIHNlY29uZHMgcnVsZXNcbi8vIFJldHVybiBhcHByb3ByaWF0ZSByZXNwb25zZSB3aGVuIHJhdGUgbGltaXQgaXMgZXhjZWVkZWRcblxuZnVuY3Rpb24gZ2V0UmF0ZUxpbWl0S2V5KGlkZW50aWZpZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgcmF0ZWxpbWl0OiR7aWRlbnRpZmllcn1gO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNSYXRlTGltaXRlZChcbiAgaWRlbnRpZmllcjogc3RyaW5nLFxuICBvcHRpb25zOiBSYXRlTGltaXRPcHRpb25zXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgeyBsaW1pdCwgd2luZG93SW5TZWNvbmRzIH0gPSBvcHRpb25zO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRSZWRpc0NsaWVudCgpO1xuICBjb25zdCBrZXkgPSBnZXRSYXRlTGltaXRLZXkoaWRlbnRpZmllcik7XG4gIFxuICBjb25zdCBjdXJyZW50ID0gYXdhaXQgY2xpZW50LmdldChrZXkpIHx8IDA7XG4gIFxuICBpZiAoTnVtYmVyKGN1cnJlbnQpID49IGxpbWl0KSB7XG4gICAgcmV0dXJuIHRydWU7IC8vIFJhdGUgbGltaXRlZFxuICB9XG4gIFxuICBhd2FpdCBjbGllbnQuaW5jcihrZXkpO1xuICBpZiAoTnVtYmVyKGN1cnJlbnQpID09PSAwKSB7XG4gICAgYXdhaXQgY2xpZW50LmV4cGlyZShrZXksIHdpbmRvd0luU2Vjb25kcyk7XG4gIH1cbiAgXG4gIHJldHVybiBmYWxzZTsgLy8gTm90IHJhdGUgbGltaXRlZFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVtYWluaW5nQXR0ZW1wdHMoXG4gIGlkZW50aWZpZXI6IHN0cmluZyxcbiAgbGltaXQ6IG51bWJlclxuKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0UmVkaXNDbGllbnQoKTtcbiAgY29uc3Qga2V5ID0gZ2V0UmF0ZUxpbWl0S2V5KGlkZW50aWZpZXIpO1xuICBcbiAgY29uc3QgY3VycmVudCA9IGF3YWl0IGNsaWVudC5nZXQoa2V5KSB8fCAwO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgbGltaXQgLSBOdW1iZXIoY3VycmVudCkpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzZXRSYXRlTGltaXQoaWRlbnRpZmllcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFJlZGlzQ2xpZW50KCk7XG4gIGF3YWl0IGNsaWVudC5kZWwoZ2V0UmF0ZUxpbWl0S2V5KGlkZW50aWZpZXIpKTtcbn0iXSwibmFtZXMiOlsiZ2V0UmVkaXNDbGllbnQiLCJnZXRSYXRlTGltaXRLZXkiLCJpZGVudGlmaWVyIiwiaXNSYXRlTGltaXRlZCIsIm9wdGlvbnMiLCJsaW1pdCIsIndpbmRvd0luU2Vjb25kcyIsImNsaWVudCIsImtleSIsImN1cnJlbnQiLCJnZXQiLCJOdW1iZXIiLCJpbmNyIiwiZXhwaXJlIiwiZ2V0UmVtYWluaW5nQXR0ZW1wdHMiLCJNYXRoIiwibWF4IiwicmVzZXRSYXRlTGltaXQiLCJkZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./server/redis/services/rateLimitService.ts\n");

/***/ }),

/***/ "(ssr)/../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next":
/*!****************************************************!*\
  !*** external "next/dist/lib/import-next-warning" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/lib/import-next-warning");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "ws":
/*!*********************!*\
  !*** external "ws" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("ws");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/socket.io-parser","vendor-chunks/engine.io-parser","vendor-chunks/@socket.io","vendor-chunks/supports-color","vendor-chunks/has-flag","vendor-chunks/ioredis","vendor-chunks/engine.io","vendor-chunks/socket.io","vendor-chunks/socket.io-adapter","vendor-chunks/uuid","vendor-chunks/negotiator","vendor-chunks/debug","vendor-chunks/redis-errors","vendor-chunks/standard-as-callback","vendor-chunks/redis-parser","vendor-chunks/mime-db","vendor-chunks/@ioredis","vendor-chunks/vary","vendor-chunks/object-assign","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/lodash.isarguments","vendor-chunks/lodash.defaults","vendor-chunks/denque","vendor-chunks/cors","vendor-chunks/cookie","vendor-chunks/cluster-key-slot","vendor-chunks/base64id","vendor-chunks/accepts"], () => (__webpack_exec__("(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclicks%2Froute&page=%2Fapi%2Fclicks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclicks%2Froute.ts&appDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsal%2Fredis-project%2Fsrc&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();